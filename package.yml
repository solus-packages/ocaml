name       : ocaml
version    : 4.04.0
release    : 3
homepage   : http://ocaml.org/
source     :
    - http://caml.inria.fr/distrib/ocaml-4.04/ocaml-4.04.0.tar.xz : 64ed6dad2316d5dff7440cea89f0f0abe07ce508b9104d1bfadf3782e79856b4
license    :
    - QPL-1.0
    - GPL-2.0
summary    : A functional language with OO extensions
description: |
    OCaml is an industrial strength programming language supporting functional, imperative and object-oriented styles
component  : programming
patterns   :
    - /usr/*
builddeps:
    - pkgconfig(x11)
setup      : |
    ./configure -prefix /usr \
        -libdir %libdir%/ocaml \
        -mandir /usr/share/man
build      : |
    %make world.opt
install    : |
    %make_install

    export compiler_libs="$installdir/%libdir%/ocaml/compiler-libs"
    mkdir -p "$compiler_libs"/{parsing,typing,utils}
    cp parsing/*.{cmi,cmo,cmx,ml,mli,mll,o} "$compiler_libs"/parsing
    cp typing/*.{cmi,cmo,cmx,ml,mli,o} "$compiler_libs"/typing
    cp utils/*.{cmi,cmo,cmx,ml,mli,o} "$compiler_libs"/utils

    rm -f "$compiler_libs"/typing/outcometree.{cmi,mli}
